## 扰码通信

### m序列的产生

下图是一个简单的n=3的m序列，其八进制表示为13 （001011）生成多项式为$x^3+x+1$，其状态逻辑图为

|  CP  | $a_3$ | $a_2$ | $a_1$ | $a_0$ |
| :--: | :---: | :---: | :---: | :---: |
|  0   |   1   |   0   |   0   |   1   |
|  1   |   1   |   1   |   0   |   0   |
|  2   |   1   |   1   |   1   |   0   |
|  3   |   0   |   1   |   1   |   1   |
|  4   |   1   |   0   |   1   |   1   |
|  5   |   0   |   1   |   0   |   1   |
|  6   |   0   |   0   |   1   |   0   |
|  7   |   1   |   0   |   0   |   1   |

![image-20250916094519381](./assets/my-image.png)

所以，其对应的verilog代码应该如下

```verilog
wire tmp;
reg r_LFSR[2:0];

assign tmp = r_LFSR[2] ^ r_LFSR[0];

always(posedge clk)
    begin
        r_LFSR <= {tmp，r_LFSR[1:0]};
    end
```

|  CP  | $a_3$ | $a_2$ | $a_1$ | $a_0$ |
| :--: | :---: | :---: | :---: | :---: |
|  0   |   1   |   0   |   0   |   1   |
|  1   |   1   |   1   |   0   |   0   |
|  2   |   1   |   1   |   1   |   0   |
|  3   |   0   |   1   |   1   |   1   |
|  4   |   1   |   0   |   1   |   1   |
|  5   |   0   |   1   |   0   |   1   |
|  6   |   0   |   0   |   1   |   0   |
|  7   |   1   |   0   |   0   |   1   |

也可以用高位作为输出，那么用到的生成函数就是$1=x^3+x$，

|  CP  | $a_3$ | $a_2$ | $a_1$ | $a_0$ |
| :--: | :---: | :---: | :---: | :---: |
|  0   |   0   |   0   |   1   |   1   |
|  1   |   0   |   1   |   1   |   1   |
|  2   |   1   |   1   |   1   |   0   |
|  3   |   1   |   1   |   0   |   0   |
|  4   |   1   |   0   |   0   |   1   |
|  5   |   0   |   0   |   1   |   1   |
|  6   |   0   |   1   |   1   |   1   |
|  7   |   1   |   1   |   1   |   0   |

所以 其对应的代码是

```
wire tmp;
reg r_LFSR[2:0];

assign tmp = r_LFSR[2] ^ r_LFSR[0];

always(posedge clk)
    begin
        r_LFSR <= {r_LFSR[1:0],tmp};
    end
```

